Â«<!DOCTYPE html>
<html lang="en">
<head>
    <title>Reviews Analyzer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #ebf8fd;
            font-family: 'Roboto', sans-serif;
        }
        
        h1 {
            font-weight: 700;
        }

        .feature-box {
            flex: 1 0 30%;
            padding: 20px;
            margin: 15px;
            text-align: center;
            background-color: #fff;
            border-radius: 0px;
            cursor: pointer;
            border-color: darkblue!important;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease, font-weight 0.3s ease, color 0.3s ease;
        }
        
        .feature-box:hover {
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
        }

        .feature-box.selected {
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.3);
            font-weight: bold;
            color: #00008B;
        }
        
        .review-card {
            flex: 1 0 30%;
            padding: 20px;
            margin: 15px;
            background-color: #fff;
            border: none;
            border-radius: 10px;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .review-card h5 {
            margin: 0 0 5px 0;
            font-weight: 500;
        }

        .positive-title {
            color: green;
        }
        
        .negative-title {
            color: red;
        }

        .container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
        }
        
        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 30px;
            line-height: 30px;
            background-color: #f8f9fa;
            text-align: center;
            border-top: 1px solid #dee2e6;
            color: #6c757d;
            font-weight: bold;
        }
        
        #reviewsTitle {
            display: none;
            text-align: center;
            font-size: 24px;
            margin-top: 20px;
        }

        .pagination {
            justify-content: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4" id="pageTitle">Customer Reviews</h1>
        <div id="featureContainer" class="d-flex flex-wrap justify-content-center"></div>
        <h1 class="text-center mb-4" id="reviewsTitle">Reviews</h1>
        <div id="reviewContainer" class="d-flex flex-wrap justify-content-center"></div>
        <nav id="paginationContainer" class="d-flex justify-content-center mt-4" aria-label="Reviews Pagination"></nav>
    </div>

    <div class="footer">
        <p>Universidade do Minho @2023</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            let productNameElement = $('#productName');
            let pageTitle = $('#pageTitle');
            let reviewsTitle = $('#reviewsTitle');
            let reviewContainer = $('#reviewContainer');
            let paginationContainer = $('#paginationContainer');
            let currentPage = 1;
            let itemsPerPage = 6;
            let selectedFeature = null;
            let spinnerOverlay = $('<div id="spinner-overlay" class="d-none"></div>');
            let spinner = $('<div class="spinner-border text-primary" role="status"></div>');
            spinnerOverlay.append(spinner);

            pageTitle.text("Customer Reviews");
            reviewsTitle.hide();
            reviewContainer.empty();

            $.getJSON('/static/response.json', function(data) {
                let featureContainer = $('#featureContainer');
                $.each(data.Features, function(i, feature) {
                    let featureBox = $('<div class="feature-box border p-3 m-2">');
                    featureBox.text(feature.Name);
                    featureBox.on('click', function() {
                        $('.feature-box').removeClass('selected');
                        $(this).addClass('selected');
                        selectedFeature = feature;
                        displayReviews(selectedFeature);
                        productNameElement.text(selectedFeature["Product name"]);
                        pageTitle.text(selectedFeature["Product name"]);
                        reviewsTitle.show();
                    });
                    featureContainer.append(featureBox);
                });
            });

            function displayReviews(feature) {
                reviewContainer.empty();
                paginationContainer.empty();

                spinnerOverlay.removeClass('d-none');
                reviewContainer.append(spinnerOverlay);

                setTimeout(function() {
                    let reviews = feature["Positive characteristics"].concat(feature["Negative characteristics"]);
                    let totalPages = Math.ceil(reviews.length / itemsPerPage);

                    if (totalPages > 1) {
                        renderPagination(totalPages);
                    }

                    let startIndex = (currentPage - 1) * itemsPerPage;
                    let endIndex = startIndex + itemsPerPage;
                    let paginatedReviews = reviews.slice(startIndex, endIndex);

                    $.each(paginatedReviews, function(i, characteristic) {
                        let reviewCard = $('<div class="review-card">');
                        if (feature["Positive characteristics"].includes(characteristic)) {
                            reviewCard.html('<h5 class="positive-title">Positive</h5><p>' + characteristic + '</p>');
                        } else {
                            reviewCard.html('<h5 class="negative-title">Negative</h5><p>' + characteristic + '</p>');
                        }
                        reviewContainer.append(reviewCard);
                    });

                    setTimeout(function() {
                        spinnerOverlay.addClass('d-none');
                    }, 0);
                }, 150);
            }

            function renderPagination(totalPages) {
                let pagination = $('<ul class="pagination"></ul>');

                for (let i = 1; i <= totalPages; i++) {
                    let pageItem = $('<li class="page-item"></li>');
                    let pageLink = $('<a class="page-link"></a>');
                    pageLink.text(i);
                    if (i === currentPage) {
                        pageItem.addClass('active');
                    }
                    pageItem.on('click', function() {
                        currentPage = i;
                        displayReviews(selectedFeature);
                    });
                    pageItem.append(pageLink);
                    pagination.append(pageItem);
                }

                paginationContainer.html(pagination);
            }
        });
    </script> 
</body>
</html>
